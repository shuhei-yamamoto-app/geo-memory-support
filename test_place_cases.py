# test_place_cases.py
from extractor.place_extractor_ginza import extract_place

TEST_CASES = [
    # 1. 一番基本：駅 + 日時
    {
        "name": "基本：駅 + 日時",
        "text": "東京駅で集合で",
        "expected": ["東京駅"],
    },

    # 2. 駅 + 公園 + 都市名 + カフェ
    {
        "name": "複数の場所：駅・公園・都市・カフェ",
        "text": "明日11時に新宿駅で友人と会ってから、代々木公園に行き、その後渋谷のカフェで勉強します。",
        "expected": ["新宿駅", "代々木公園", "渋谷のカフェ"],
    },

    # 3. ビル名 + フロア + 会議室
    {
        "name": "ビル + フロア + 会議室",
        "text": "来週の火曜日に新宿センタービル7階の会議室で打ち合わせがあります。",
        "expected": ["新宿センタービル7階の会議室"],  # 理想形
    },

    # 4. 会社名・オフィス
    {
        "name": "会社名・オフィス",
        "text": "明日の午後、ABC株式会社本社で打ち合わせをした後、渋谷オフィスに移動します。",
        "expected": ["ABC株式会社本社", "渋谷オフィス"],  # 会社・オフィス系
    },

    # 5. 学校・大学
    {
        "name": "学校・大学",
        "text": "午前中は明治大学中野キャンパスで授業をして、午後は新宿の語学学校に行きます。",
        "expected": ["明治大学中野キャンパス", "新宿の語学学校"],
    },

    # 6. 場所が存在しないケース（オンライン）
    {
        "name": "場所なし（オンライン）",
        "text": "明日10時からオンラインでミーティングをしましょう。",
        "expected": [],  # 何も取れないのが理想
    },

    # 7. 時間表現と混在（時間を場所として誤検出しないか）
    {
        "name": "時間表現との混在",
        "text": "15時に池袋駅で集合して、18時に上野公園で解散しましょう。",
        "expected": ["池袋駅", "上野公園"],
    },

    # 8. 語尾ルールだけで取れるパターン（固有表現が弱い場合の保険）
    {
        "name": "語尾ルールのみ（〜公園, 〜駅）",
        "text": "近くの中央公園や北口駅前の広場でイベントが開催されます。",
        "expected": ["中央公園", "北口駅前の広場"],  # 少なくとも中央公園は取れてほしい
    },

    # 9. 「渋谷」単体をできれば場所にしたくないケース（カフェとセットで扱いたい）
    {
        "name": "修飾語としての都市名",
        "text": "渋谷のカフェで作業したあと、新宿駅に向かいます。",
        "expected": ["渋谷のカフェ", "新宿駅"],
    },

    # 10. 場所っぽくない「〜駅前店」など（どこまで許容するか確認用）
    {
        "name": "チェーン店っぽい名前",
        "text": "仕事帰りに池袋駅前店で夕食をとります。",
        "expected": ["池袋駅前店"],  # こういうのも場所として扱う想定
    },
]


def main():
    for case in TEST_CASES:
        name = case["name"]
        text = case["text"]
        expected = case["expected"]

        print("▼", name)
        print("  文:", text)
        result = extract_place(text)
        print("  抽出結果:", result)
        print("  理想(目標):", expected)
        print("  → OKかどうかは目視で確認してください\n")


if __name__ == "__main__":
    main()
